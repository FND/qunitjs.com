<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2.x Upgrade Guide | QUnit</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/css/styles.css" media="screen">
    <meta name="twitter:creator" content="@qunitjs">
    <meta name="twitter:site" content="@qunitjs">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="API reference documentation for QUnit">
    <meta name="twitter:title" content="QUnit API Docs">
  </head>
  <body>
    <!-- <a class="a11y" href="#main">skip to content</a> -->

    <header class="site-header" role="banner">
        <div class="site-header-wrapper wrapper">
            <a class="site-logo" href="/">
                <img src="/img/logo-with-colored-text.svg" alt="QUnit Logo">
            </a>

            <nav class="site-nav">
                <ul class="site-nav-list">
                    <li class="site-nav-item">
                        <a class="site-nav-link has-sub-list" href="/guides">
                            Guides
                        </a>

                        <ul class="site-nav-sub-list">
                            <li><a class="site-sub-nav-link" href="/intro">Getting Started</a></li>
                            <li><a class="site-sub-nav-link" href="/plugins">Plugins</a></li>
                            <li><a class="site-sub-nav-link" href="/upgrade-guide-2.x">2.x Upgrade Guide</a></li>
                        </ul>
                    </li>

                    <li class="site-nav-item">
                        <a class="site-nav-link" href="https://api.qunitjs.com">
                            Documentation
                        </a>
                    </li>

                    <li class="site-nav-item">
                        <a class="site-nav-link" href="/about">
                            About
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero">
    <div class="wrapper">
        <h1 class="hero-title">2.x Upgrade Guide</h1>
    </div>
</section>

<div class="main wrapper">
    <h2 id="overview">Overview</h2>

<p>This guide will assist you in upgrading from QUnit 1.x to QUnit 2.x. All breaking changes are listed below with an explanation of how to upgrade your code to work with QUnit 2.x.</p>

<p class="note">The <a href="https://github.com/apsdehal/qunit-migrate">qunit-migrate</a> project can help you automate the transition to QUnit 2.x.</p>

<p>Note that almost all the new APIs of QUnit 2.0.0 are already usable in QUnit 1.23.1, allowing you to migrate step-by-step. The only exception is the new module hooks <code class="highlighter-rouge">before</code> and <code class="highlighter-rouge">after</code>.</p>

<p>QUnit 2.0.x will include a migration layer that throws descriptive errors for all deprecated methods (<code class="highlighter-rouge">"Global 'test()' method is removed, use 'QUnit.test() instead"</code>), to help you migrate to the new APIs. QUnit 2.1+ will remove that layer, causing failures that will be more difficult to debug (<code class="highlighter-rouge">"ReferenceError: test is not defined"</code>).</p>

<h2 id="removed-globals">Removed globals</h2>

<p>QUnit no longer exposes multiple global variables. The only global variable still exposed is <code class="highlighter-rouge">QUnit</code>. Use <a href="http://api.qunitjs.com/QUnit.module/"><code class="highlighter-rouge">QUnit.module()</code></a> and <a href="http://api.qunitjs.com/QUnit.test/"><code class="highlighter-rouge">QUnit.test()</code></a> to define your test suite, and use the <a href="http://api.qunitjs.com/QUnit.assert/"><code class="highlighter-rouge">assert</code></a> argument in test callbacks to write assertions.</p>

<p>The global <code class="highlighter-rouge">stop()</code> and <code class="highlighter-rouge">start()</code> methods are gone, replaced by <a href="http://api.qunitjs.com/async/"><code class="highlighter-rouge">assert.async()</code></a>, which returns a callback. Execute this callback when your test is done.</p>

<h3 id="replace-module-with-qunitmodule">Replace <code class="highlighter-rouge">module()</code> with <code class="highlighter-rouge">QUnit.module()</code></h3>

<p>The global function <code class="highlighter-rouge">module()</code> is gone. Use <a href="http://api.qunitjs.com/QUnit.module/"><code class="highlighter-rouge">QUnit.module()</code></a> instead.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">module</span><span class="p">(</span> <span class="s2">"router"</span> <span class="p">);</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span> <span class="s2">"router"</span> <span class="p">);</span>
</code></pre>
</div>

<h3 id="replace-test-with-qunittest">Replace <code class="highlighter-rouge">test()</code> with <code class="highlighter-rouge">QUnit.test()</code></h3>

<p>The global function <code class="highlighter-rouge">test()</code> is gone. Use <a href="http://api.qunitjs.com/QUnit.test/"><code class="highlighter-rouge">QUnit.test()</code></a> instead.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">test</span><span class="p">(</span> <span class="s2">"defaults to home"</span> <span class="p">);</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"defaults to home"</span> <span class="p">);</span>
</code></pre>
</div>

<h3 id="replace-stop-and-start-with-assertasync">Replace <code class="highlighter-rouge">stop()</code> and <code class="highlighter-rouge">start()</code> with <code class="highlighter-rouge">assert.async()</code></h3>

<p>The global functions <code class="highlighter-rouge">stop()</code> and <code class="highlighter-rouge">start()</code> are gone. Use <a href="http://api.qunitjs.com/async/"><code class="highlighter-rouge">assert.async()</code></a> instead, which returns a “done” function that should be called when the asynchronous operation has completed.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"navigates to new page (async)"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">stop</span><span class="p">();</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">newPage</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">newPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
		<span class="nx">start</span><span class="p">();</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"navigates to new page (async)"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">done</span> <span class="o">=</span> <span class="nx">assert</span><span class="p">.</span><span class="nx">async</span><span class="p">();</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">newPage</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">newPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
		<span class="nx">done</span><span class="p">();</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<h3 id="replace-asynctest-with-qunittest-and-assertasync">Replace <code class="highlighter-rouge">asyncTest()</code> with <code class="highlighter-rouge">QUnit.test()</code> and <code class="highlighter-rouge">assert.async()</code></h3>

<p>The global function <code class="highlighter-rouge">asyncTest()</code> is gone. Use <a href="http://api.qunitjs.com/QUnit.test/"><code class="highlighter-rouge">QUnit.test()</code></a> and <a href="http://api.qunitjs.com/async/"><code class="highlighter-rouge">assert.async()</code></a> instead.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">asyncTest</span><span class="p">(</span> <span class="s2">"navigates to new page (async)"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">newPage</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">newPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
		<span class="nx">start</span><span class="p">();</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"navigates to new page (async)"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">done</span> <span class="o">=</span> <span class="nx">assert</span><span class="p">.</span><span class="nx">async</span><span class="p">();</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">newPage</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">newPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
		<span class="nx">done</span><span class="p">();</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<h3 id="replace-expect-with-assertexpect">Replace <code class="highlighter-rouge">expect()</code> with <code class="highlighter-rouge">assert.expect()</code></h3>

<p>The global function <code class="highlighter-rouge">expect()</code> is gone. Use <a href="http://api.qunitjs.com/expect/"><code class="highlighter-rouge">assert.expect()</code></a> instead.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"refresh (sync)"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">expect</span><span class="p">(</span> <span class="mi">1</span> <span class="p">);</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">refresh</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">currentPage</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">currentPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"refresh (sync)"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span> <span class="mi">1</span> <span class="p">);</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">refresh</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">currentPage</span> <span class="p">)</span> <span class="p">{</span>
		<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">currentPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<h3 id="replace-global-assertions-with-assert-arguments">Replace global assertions with <code class="highlighter-rouge">assert</code> arguments</h3>

<p>All global assertions, like <code class="highlighter-rouge">equal()</code> and <code class="highlighter-rouge">deepEqual()</code> are gone. Use <code class="highlighter-rouge">assert</code> instead, like <a href="http://api.qunitjs.com/equal/"><code class="highlighter-rouge">assert.equal()</code></a> or <a href="http://api.qunitjs.com/deepEqual/"><code class="highlighter-rouge">assert.deepEqual()</code></a>.</p>

<p>Here are all assertion methods affected by this change in alphabetic order: <a href="http://api.qunitjs.com/deepEqual/"><code class="highlighter-rouge">deepEqual()</code></a>, <a href="http://api.qunitjs.com/equal/"><code class="highlighter-rouge">equal()</code></a>, <a href="http://api.qunitjs.com/notDeepEqual/"><code class="highlighter-rouge">notDeepEqual()</code></a>, <a href="http://api.qunitjs.com/notEqual/"><code class="highlighter-rouge">notEqual()</code></a>, <a href="http://api.qunitjs.com/notPropEqual/"><code class="highlighter-rouge">notPropEqual()</code></a>, <a href="http://api.qunitjs.com/notStrictEqual/"><code class="highlighter-rouge">notStrictEqual()</code></a>, <a href="http://api.qunitjs.com/ok/"><code class="highlighter-rouge">ok()</code></a>, <a href="http://api.qunitjs.com/propEqual/"><code class="highlighter-rouge">propEqual()</code></a>, <a href="http://api.qunitjs.com/strictEqual/"><code class="highlighter-rouge">strictEqual()</code></a>, and <a href="http://api.qunitjs.com/throws/"><code class="highlighter-rouge">throws()</code></a>.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"static properties"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">ok</span><span class="p">(</span> <span class="nx">router</span><span class="p">.</span><span class="nx">initialized</span> <span class="p">);</span>
	<span class="nx">equal</span><span class="p">(</span> <span class="nx">router</span><span class="p">.</span><span class="nx">currentPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">3</span> <span class="p">);</span>
	<span class="nx">deepEqual</span><span class="p">(</span> <span class="nx">router</span><span class="p">.</span><span class="nx">currentPage</span><span class="p">,</span> <span class="p">{</span>
		<span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
		<span class="na">path</span><span class="p">:</span> <span class="s2">"/about"</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"static properties"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">ok</span><span class="p">(</span> <span class="nx">router</span><span class="p">.</span><span class="nx">initialized</span> <span class="p">);</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">router</span><span class="p">.</span><span class="nx">currentPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">3</span> <span class="p">);</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span> <span class="nx">router</span><span class="p">.</span><span class="nx">currentPage</span><span class="p">,</span> <span class="p">{</span>
		<span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
		<span class="na">path</span><span class="p">:</span> <span class="s2">"/about"</span>
	<span class="p">});</span>
<span class="p">});</span>
</code></pre>
</div>

<h2 id="rename-module-hooks">Rename module hooks</h2>

<p>The <a href="http://api.qunitjs.com/QUnit.module/">module hooks</a> <code class="highlighter-rouge">setup</code> and <code class="highlighter-rouge">teardown</code> have been renamed to <code class="highlighter-rouge">beforeEach</code> and <code class="highlighter-rouge">afterEach</code>, to make it more obvious that they run for each test within a module.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span> <span class="s2">"router"</span><span class="p">,</span> <span class="p">{</span>
	<span class="na">setup</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">router</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Router</span><span class="p">();</span>
	<span class="p">},</span>
	<span class="na">teardown</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span> <span class="s2">"router"</span><span class="p">,</span> <span class="p">{</span>
	<span class="na">beforeEach</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">router</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Router</span><span class="p">();</span>
	<span class="p">},</span>
	<span class="na">afterEach</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<h2 id="removed-and-modified-qunit-methods-and-properties">Removed and modified QUnit methods and properties</h2>

<p>A few methods and properties in the <code class="highlighter-rouge">QUnit</code> namespace have been modified or removed.</p>

<h3 id="replace-qunitlog--callback-with-qunitlog-callback--for-all-reporting-callbacks">Replace <code class="highlighter-rouge">QUnit.log = callback</code> with <code class="highlighter-rouge">QUnit.log( callback )</code> for all reporting callbacks</h3>

<p>For several versions of QUnit before 2.0, custom reporters could be registered by calling the appropriate methods with a callback function. If your code still uses the old approach of overwriting a property on the <code class="highlighter-rouge">QUnit</code> object, replace that by calling the method instead.</p>

<p>This applies to all reporting callbacks, specifically: <a href="http://api.qunitjs.com/QUnit.begin/"><code class="highlighter-rouge">begin</code></a>, <a href="http://api.qunitjs.com/QUnit.done/"><code class="highlighter-rouge">done</code></a>, <a href="http://api.qunitjs.com/QUnit.log/"><code class="highlighter-rouge">log</code></a>, <a href="http://api.qunitjs.com/QUnit.moduleDone/"><code class="highlighter-rouge">moduleDone</code></a>, <a href="http://api.qunitjs.com/QUnit.moduleStart/"><code class="highlighter-rouge">moduleStart</code></a>, <a href="http://api.qunitjs.com/QUnit.testDone/"><code class="highlighter-rouge">testDone</code></a>, and <a href="http://api.qunitjs.com/QUnit.testStart/"><code class="highlighter-rouge">testStart</code></a>.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">results</span> <span class="p">);</span>
<span class="p">};</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">results</span> <span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<h3 id="replace-qunitpush-with-thispushresult">Replace <code class="highlighter-rouge">QUnit.push()</code> with <code class="highlighter-rouge">this.pushResult()</code></h3>

<p>To implement custom assertions, assign functions to <a href="https://api.qunitjs.com/config/QUnit.assert"><code class="highlighter-rouge">QUnit.assert</code></a>, inside use <a href="https://api.qunitjs.com/assert/pushResult"><code class="highlighter-rouge">this.pushResult()</code></a>, replacing <code class="highlighter-rouge">QUnit.push</code>. This way, the assertion will be directly related to its test context, preventing asynchronous tests leaking assertions to other tests.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">assert</span><span class="p">.</span><span class="nx">mod2</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">actual</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">%</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">QUnit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">actual</span> <span class="o">===</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">);</span>
<span class="p">};</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">assert</span><span class="p">.</span><span class="nx">mod2</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">actual</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">%</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pushResult</span><span class="p">(</span> <span class="nx">actual</span> <span class="o">===</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span><span class="p">,</span> <span class="nx">message</span> <span class="p">);</span>
<span class="p">};</span>
</code></pre>
</div>

<h3 id="stop-using-qunitinit-no-replacement">Stop using <code class="highlighter-rouge">QUnit.init</code>, no replacement</h3>

<p>This method used to reinitialize the test runner. It should never have been exposed as a public method and is now gone, without replacement. If you’ve built a setup that requires the use of <code class="highlighter-rouge">QUnit.init</code>, contact us (<a href="https://github.com/qunitjs/qunit/issues">issue tracker</a>, <a href="https://forum.jquery.com/qunit-and-testing">forum</a>, <a href="irc://irc.freenode.net/#jquery-dev">IRC</a>) and we can recommend a replacement.</p>

<h3 id="stop-using-qunitreset-split-one-test-into-multiple-tests">Stop using <code class="highlighter-rouge">QUnit.reset</code>, split one test into multiple tests</h3>

<p>This method used to give access to QUnit’s internal fixture reset. This is now gone, without replacement. If your code is using it, you probably need to split affected tests into multiple tests.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"refresh"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">router</span><span class="p">.</span><span class="nx">currentPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>

	<span class="nx">QUnit</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

	<span class="nx">history</span><span class="p">.</span><span class="nx">replaceState</span><span class="p">(</span> <span class="s2">"/about"</span> <span class="p">);</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">router</span><span class="p">.</span><span class="nx">currentPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"refresh, default"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">router</span><span class="p">.</span><span class="nx">currentPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
<span class="p">});</span>

<span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"refresh, after replaceState"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">history</span><span class="p">.</span><span class="nx">replaceState</span><span class="p">(</span> <span class="s2">"/about"</span> <span class="p">);</span>
	<span class="nx">router</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
	<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">router</span><span class="p">.</span><span class="nx">currentPage</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<h3 id="replace-qunitjsdump-with-qunitdump">Replace <code class="highlighter-rouge">QUnit.jsDump</code> with <code class="highlighter-rouge">QUnit.dump</code></h3>

<p>Originally <code class="highlighter-rouge">jsDump</code> was a standalone library imported into QUnit. It has since evolved further within the library. To reflect that, the property was renamed to <a href="http://api.qunitjs.com/QUnit.dump.parse/"><code class="highlighter-rouge">QUnit.dump.parse</code></a>. This should only affect custom reporter code, not regular testsuites.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">actual</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">actual</span> <span class="p">);</span>
  <span class="kd">var</span> <span class="nx">expected</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">jsDump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">expected</span> <span class="p">);</span>
  <span class="nx">sendMessage</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span> <span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">actual</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">dump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">actual</span> <span class="p">);</span>
  <span class="kd">var</span> <span class="nx">expected</span> <span class="o">=</span> <span class="nx">QUnit</span><span class="p">.</span><span class="nx">dump</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">expected</span> <span class="p">);</span>
  <span class="nx">sendMessage</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">result</span><span class="p">,</span> <span class="nx">actual</span><span class="p">,</span> <span class="nx">expected</span> <span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<h3 id="replace-expected-argument-in-qunittest">Replace expected argument in <code class="highlighter-rouge">QUnit.test</code></h3>

<p>The optional second <code class="highlighter-rouge">expected</code> argument that <code class="highlighter-rouge">QUnit.test</code> used to accept was removed. Call <code class="highlighter-rouge">assert.expect()</code> instead.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"addition"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">add</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="p">),</span> <span class="mi">3</span> <span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"addition"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">expect</span><span class="p">(</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span> <span class="nx">add</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="p">),</span> <span class="mi">3</span> <span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<h2 id="miscellaneous">Miscellaneous</h2>

<h3 id="replace-assertthrows-block-string-message--with-assertthrows-block-regexp-message-">Replace <code class="highlighter-rouge">assert.throws( block, string, message )</code> with <code class="highlighter-rouge">assert.throws( block, regexp, message )</code></h3>

<p>The overload of <code class="highlighter-rouge">assert.throws()</code> which expected a block, error string, and assertion message has been removed and will now throw an exception. Use a regular expression instead.</p>

<p>Before:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"throws"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">assert</span><span class="p">.</span><span class="kr">throws</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="s2">"This is an error"</span> <span class="p">);</span>
	<span class="p">},</span> <span class="s2">"This is an error"</span><span class="p">,</span> <span class="s2">"An error should have been thrown"</span> <span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<p>After:</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="nx">QUnit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">"throws"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">assert</span> <span class="p">)</span> <span class="p">{</span>
	<span class="nx">assert</span><span class="p">.</span><span class="kr">throws</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span> <span class="s2">"This is an error"</span> <span class="p">);</span>
	<span class="p">},</span> <span class="sr">/^This is an error$/</span><span class="p">,</span> <span class="s2">"An error should have been thrown"</span> <span class="p">);</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Note that in the two-argument overload <code class="highlighter-rouge">assert.throws( block, string )</code>, the string argument has always been interpreted as an assertion message instead of an expected value. You do not need to change any of these assertions. Of course, you should use the <code class="highlighter-rouge">assert.throws( block, regexp, message )</code> form anyway to make your assertions more precise.</p>

</div>


    <footer class="site-footer">
        <div class="wrapper">
            <p class="external-links">
                <a href="https://github.com/qunitjs" target="_blank" rel="noopener noreferrer">GitHub</a>
                <a href="https://twitter.com/qunitjs" target="_blank" rel="noopener noreferrer">Twitter</a>
                <a href="https://gitter.im/qunitjs/qunit" target="_blank" rel="noopener noreferrer">Chat</a>
            </p>

            <p class="copyright">Copyright &copy; 2018 <a href="https://js.foundation/" target="_blank" rel="noopener noreferrer">JS Foundation</a> and contributors</p>
        </div>
    </footer>
  </body>
 </html>
